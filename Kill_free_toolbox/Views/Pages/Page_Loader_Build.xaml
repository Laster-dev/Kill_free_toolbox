<Page x:Class="Kill_free_toolbox.Views.Pages.Page_Loader_Build"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:Kill_free_toolbox.Views.Pages"
      mc:Ignorable="d" 
      d:DesignHeight="600" d:DesignWidth="1200"
      TextOptions.TextFormattingMode="Display"
      Title="Page_Loader_Build">


    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>


        <!-- 主要内容区域 -->
        <Grid >
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1.5*"/>
                <ColumnDefinition Width="2*"/>
            </Grid.ColumnDefinitions>

            <!-- 左侧：架构和选项配置 -->
            <StackPanel Grid.Column="0" Margin="0,0,3,0">

                <!-- Shellcode配置 -->
                <GroupBox Header="Shellcode 配置"  Margin="2" VerticalAlignment="Center">
                    <Grid  Margin="10" VerticalAlignment="Center">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Shellcode文件选择 -->
                        <Grid Grid.Row="0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBox x:Name="ShellcodePathTextBox" Grid.Column="1" Margin="0,10,10,10"
                                     IsReadOnly="True" Text="{Binding ShellcodePath}" VerticalAlignment="Center"/>
                            <Button x:Name="SelectShellcodeButton" Grid.Column="2" Content="选择" 
                                   Click="SelectShellcodeButton_Click" VerticalAlignment="Center"/>
                        </Grid>

                        <!-- 架构选择 -->
                        <Grid Grid.Row="1" Margin="0,5,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="架构：" VerticalAlignment="Center" />
                            <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                                <RadioButton x:Name="ArchitectureX86" Content="x86" IsChecked="{Binding IsArchitectureX86}" Height="32" Style="{StaticResource myRadioButton}"
                                           Margin="0,0,15,0" VerticalAlignment="Center" FontSize="11"/>
                                <RadioButton x:Name="ArchitectureX64" Content="x64" IsChecked="{Binding IsArchitectureX64}" Height="32" Style="{StaticResource myRadioButton}"
                                           VerticalAlignment="Center" FontSize="11"/>
                            </StackPanel>
                        </Grid>

                        <!-- 膨胀程度 -->
                        <Grid Grid.Row="2" Margin="0,5,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="膨胀：" />
                            <Slider x:Name="InflationSlider" Grid.Column="1" Maximum="3" Minimum="0" Value="{Binding InflationValue}" 
                                   VerticalAlignment="Center" ValueChanged="InflationSlider_ValueChanged"/>
                        
                        </Grid>
                    </Grid>
                </GroupBox>

                <!-- 混淆选项 -->
                <GroupBox Header="混淆选项(未实现)" Margin="2">

                    <Grid  Margin="10">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <WrapPanel Grid.Row="0">
                            <CheckBox x:Name="EraseIATCheckBox" Content="抹除IAT" IsChecked="{Binding EraseIAT}" />
                            <CheckBox x:Name="ResourceEmbedCheckBox" Content="资源嵌入" IsChecked="{Binding ResourceEmbed}" />
                        </WrapPanel>

                        <Grid Grid.Row="1" Margin="0,5,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <CheckBox x:Name="AddFakeExportsCheckBox" Content="无效导出" 
                                     VerticalAlignment="Center" Grid.Column="0" IsChecked="{Binding AddFakeExports}" />
                            <Slider x:Name="FakeExportsSlider" Grid.Column="1" Maximum="99999" Minimum="0" Value="{Binding FakeExportsCount}" 
                                   VerticalAlignment="Center" Margin="5,0" IsEnabled="{Binding AddFakeExports}" ValueChanged="FakeExportsSlider_ValueChanged"/>
                            <TextBlock x:Name="FakeExportsValueText" Grid.Column="2" Text="{Binding FakeExportsCount, StringFormat={}{0:F0}}" Width="50"
                                      Margin="5,0,0,0" VerticalAlignment="Center"/>
                        </Grid>
                    </Grid>
                </GroupBox>


            </StackPanel>

            <!-- 右侧：PE资源编辑 -->
            <StackPanel Grid.Column="1" Margin="3,0,0,0" >

                <!-- 文件信息 -->
                <GroupBox Header="文件信息(未实现)"  Margin="2">
                    <Grid  Margin="10">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- 图标选择 -->
                        <TextBlock Text="图标：" Grid.Row="0" Grid.Column="0" Margin="5,5,5,5" VerticalAlignment="Center"/>
                        <TextBox x:Name="IconPathTextBox" Grid.Row="0" Grid.Column="1" 
                                 IsReadOnly="True" Text="{Binding IconPath}" Margin="5,5,5,5" VerticalAlignment="Center"/>

                        <!-- 产品名称 -->
                        <TextBlock Text="产品名：" Grid.Row="1" Grid.Column="0" Margin="5,5,5,5" VerticalAlignment="Center" />
                        <TextBox x:Name="ProductNameTextBox" Grid.Row="1" Grid.Column="1" 
                                 Text="{Binding ProductName}" Margin="5,5,5,5" VerticalAlignment="Center"/>

                        <!-- 文件描述 -->
                        <TextBlock Text="描述：" Grid.Row="2" Grid.Column="0" Margin="5,5,5,5" VerticalAlignment="Center" />
                        <TextBox x:Name="FileDescriptionTextBox" Grid.Row="2" Grid.Column="1" 
                                 Text="{Binding FileDescription}" Margin="5,5,5,5" VerticalAlignment="Center"/>

                        <!-- 版本信息 -->
                        <TextBlock Text="版本：" Grid.Row="3" Grid.Column="0" Margin="5,5,5,5" VerticalAlignment="Center" />
                        <TextBox x:Name="VersionTextBox" Grid.Row="3" Grid.Column="1" 
                                 Text="{Binding Version}" Margin="5,5,5,5" VerticalAlignment="Center"/>

                        <!-- 版权信息 -->
                        <TextBlock Text="版权：" Grid.Row="4" Grid.Column="0" Margin="5,5,5,5" VerticalAlignment="Center" />
                        <TextBox x:Name="CopyrightTextBox" Grid.Row="4" Grid.Column="1"
                                 Text="{Binding Copyright}" Margin="5,5,5,5" VerticalAlignment="Center"/>
                    </Grid>
                </GroupBox>

                <!-- 时间戳和签名 -->
                <GroupBox Header="时间戳和签名(未实现)"  Margin="2">
                    <Grid  Margin="10">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <!-- 时间戳 -->
                        <TextBlock Text="时间戳：" Grid.Row="0" Grid.Column="0" VerticalAlignment="Center" />
                        <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal" >
                            <RadioButton  Content="当前时间" IsChecked="{Binding UseCurrentTimestamp}" Height="32"  Style="{StaticResource myRadioButton}"
             VerticalAlignment="Center" FontSize="11"/>
                            <RadioButton  Content="无效时间" IsChecked="{Binding UseInvalidTimestamp}" Height="32"  Style="{StaticResource myRadioButton}"
            VerticalAlignment="Center" FontSize="11"/>
                            
                        </StackPanel>

                        <!-- 数字签名 -->
                        <TextBlock Text="签名复制：" Grid.Row="1" Grid.Column="0" VerticalAlignment="Center" />
                        <TextBox x:Name="SignaturePathTextBox" Grid.Row="1" Grid.Column="1" Margin="10"
                                 IsReadOnly="True" Text="{Binding SignaturePath}"/>
                        <Button x:Name="SelectSignatureButton" Grid.Row="1" Grid.Column="2" Content="选择" 
                                Click="SelectSignatureButton_Click" VerticalAlignment="Center"/>

                    </Grid>
                </GroupBox>
            </StackPanel>
        </Grid>


        <Button x:Name="GenerateButton" Content="生成加载器"  Grid.Row="1"
                        Click="GenerateButton_Click" Background="#FF4A9EFF" Foreground="White" FontWeight="Bold" Margin="10"
                        Height="35"/>

    </Grid>
</Page>
